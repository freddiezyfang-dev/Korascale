# ğŸ” API 404 é”™è¯¯æ’æŸ¥æŒ‡å—

## âŒ é—®é¢˜ï¼šè®¿é—® `/api/journeys` æˆ– `/api/test` æ˜¾ç¤º 404

## ğŸ” è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1ï¼šç¡®è®¤éƒ¨ç½²çŠ¶æ€

1. **æ£€æŸ¥ Vercel Dashboard**ï¼š
   - è¿›å…¥ [Vercel Dashboard](https://vercel.com/dashboard)
   - é€‰æ‹©ä½ çš„é¡¹ç›®
   - æŸ¥çœ‹ **"Deployments"** æ ‡ç­¾
   - ç¡®è®¤æœ€æ–°éƒ¨ç½²æ˜¯æˆåŠŸçš„ï¼ˆç»¿è‰² âœ…ï¼‰
   - ç¡®è®¤æœ€æ–°éƒ¨ç½²åŒ…å« commit `1016a5d` æˆ–æ›´æ–°

2. **æ£€æŸ¥æ„å»ºæ—¥å¿—**ï¼š
   - ç‚¹å‡»æœ€æ–°éƒ¨ç½²
   - æŸ¥çœ‹ **"Build Logs"**
   - ç¡®è®¤æ²¡æœ‰æ„å»ºé”™è¯¯
   - ç‰¹åˆ«æ³¨æ„æ˜¯å¦æœ‰ TypeScript é”™è¯¯

### æ­¥éª¤ 2ï¼šæµ‹è¯•ä¸åŒçš„ API ç«¯ç‚¹

ä¾æ¬¡æµ‹è¯•ä»¥ä¸‹ç«¯ç‚¹ï¼Œçœ‹å“ªä¸ªè¿”å› 404ï¼š

```
https://your-project.vercel.app/api/test
https://your-project.vercel.app/api/data
https://your-project.vercel.app/api/journeys
https://your-project.vercel.app/api/upload
```

**å¦‚æœæ‰€æœ‰ API éƒ½è¿”å› 404**ï¼š
- è¯´æ˜æ˜¯è·¯ç”±é…ç½®é—®é¢˜
- å¯èƒ½éœ€è¦æ£€æŸ¥ Next.js é…ç½®æˆ–éƒ¨ç½²è®¾ç½®

**å¦‚æœåªæœ‰æŸäº› API è¿”å› 404**ï¼š
- è¯´æ˜æ˜¯ç‰¹å®šè·¯ç”±çš„é—®é¢˜
- æ£€æŸ¥å¯¹åº”è·¯ç”±æ–‡ä»¶çš„è¯­æ³•

### æ­¥éª¤ 3ï¼šæ£€æŸ¥ Function Logs

1. **åœ¨ Vercel Dashboard**ï¼š
   - **Functions** â†’ **Logs**
   - è®¿é—® `/api/test`
   - æŸ¥çœ‹æ˜¯å¦æœ‰ç›¸å…³æ—¥å¿—

**å¦‚æœå®Œå…¨æ²¡æœ‰æ—¥å¿—**ï¼š
- è¯´æ˜è·¯ç”±æ ¹æœ¬æ²¡æœ‰è¢«è°ƒç”¨
- å¯èƒ½æ˜¯è·¯ç”±æ³¨å†Œå¤±è´¥

**å¦‚æœæœ‰æ—¥å¿—ä½†æ˜¾ç¤ºé”™è¯¯**ï¼š
- æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯

### æ­¥éª¤ 4ï¼šéªŒè¯æ–‡ä»¶ç»“æ„

ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
```
âœ… src/app/api/test/route.ts
âœ… src/app/api/journeys/route.ts
âœ… src/app/api/data/route.ts
âœ… src/app/api/upload/route.ts
```

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šå¼ºåˆ¶é‡æ–°éƒ¨ç½²

1. **åœ¨ Vercel Dashboard**ï¼š
   - **Deployments** â†’ æœ€æ–°éƒ¨ç½²
   - ç‚¹å‡» **"..."** â†’ **"Redeploy"**
   - é€‰æ‹© **"Use existing Build Cache"** å–æ¶ˆå‹¾é€‰
   - ç‚¹å‡» **"Redeploy"**

2. **ç­‰å¾…éƒ¨ç½²å®Œæˆ**ï¼ˆçº¦ 3-5 åˆ†é’Ÿï¼‰

### æ–¹æ¡ˆ 2ï¼šæ¨é€ç©º commit è§¦å‘éƒ¨ç½²

```bash
git commit --allow-empty -m "trigger: å¼ºåˆ¶é‡æ–°éƒ¨ç½²ä»¥ä¿®å¤ API è·¯ç”±"
git push origin main
```

### æ–¹æ¡ˆ 3ï¼šæ£€æŸ¥ Next.js é…ç½®

ç¡®è®¤ `next.config.ts` ä¸­æ²¡æœ‰ç¦ç”¨ API è·¯ç”±ï¼š

```typescript
const nextConfig: NextConfig = {
  // ä¸åº”è¯¥æœ‰è¿™äº›é…ç½®ï¼š
  // experimental: {
  //   serverActions: false, // âŒ è¿™ä¼šç¦ç”¨ API è·¯ç”±
  // }
};
```

### æ–¹æ¡ˆ 4ï¼šéªŒè¯ Vercel é¡¹ç›®è®¾ç½®

1. **åœ¨ Vercel Dashboard**ï¼š
   - **Settings** â†’ **General**
   - ç¡®è®¤ **"Framework Preset"** æ˜¯ **"Next.js"**
   - ç¡®è®¤ **"Root Directory"** æ˜¯æ­£ç¡®çš„ï¼ˆé€šå¸¸æ˜¯æ ¹ç›®å½•ï¼‰

2. **æ£€æŸ¥ Build Settings**ï¼š
   - **Settings** â†’ **General** â†’ **Build & Development Settings**
   - **Build Command**: åº”è¯¥æ˜¯ `next build` æˆ– `npm run build`
   - **Output Directory**: åº”è¯¥ç•™ç©ºæˆ–è®¾ç½®ä¸º `.next`

---

## ğŸ§ª æœ¬åœ°æµ‹è¯•

åœ¨æœ¬åœ°éªŒè¯è·¯ç”±æ˜¯å¦å·¥ä½œï¼š

```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 2. æµ‹è¯•è·¯ç”±
curl http://localhost:3000/api/test
# åº”è¯¥è¿”å›ï¼š{"success": true, ...}

curl http://localhost:3000/api/journeys
# åº”è¯¥è¿”å›ï¼š{"journeys": []} æˆ– 500 é”™è¯¯ï¼ˆå¦‚æœæ•°æ®åº“æœªé…ç½®ï¼‰
```

**å¦‚æœæœ¬åœ°ä¹Ÿè¿”å› 404**ï¼š
- æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯
- è¿è¡Œ `npm run build` æŸ¥çœ‹æ„å»ºé”™è¯¯

**å¦‚æœæœ¬åœ°å·¥ä½œä½† Vercel ä¸å·¥ä½œ**ï¼š
- æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- æ£€æŸ¥éƒ¨ç½²æ—¥å¿—

---

## ğŸ“ å¸¸è§åŸå› 

### 1. æ„å»ºç¼“å­˜é—®é¢˜

**è§£å†³**ï¼šæ¸…é™¤æ„å»ºç¼“å­˜å¹¶é‡æ–°éƒ¨ç½²

### 2. Next.js 15 é…ç½®é—®é¢˜

Next.js 15 å¯èƒ½æœ‰æ–°çš„è¦æ±‚ï¼Œæ£€æŸ¥ï¼š
- `package.json` ä¸­çš„ Next.js ç‰ˆæœ¬
- æ˜¯å¦éœ€è¦æ›´æ–°é…ç½®

### 3. æ–‡ä»¶è·¯å¾„é—®é¢˜

ç¡®è®¤ API è·¯ç”±æ–‡ä»¶åœ¨æ­£ç¡®ä½ç½®ï¼š
- âœ… `src/app/api/[route]/route.ts`
- âŒ `src/app/api/[route].ts` (é”™è¯¯)

### 4. TypeScript ç¼–è¯‘é”™è¯¯

å¦‚æœ TypeScript ç¼–è¯‘å¤±è´¥ï¼Œè·¯ç”±å¯èƒ½ä¸ä¼šè¢«æ³¨å†Œï¼š
- æ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­çš„ TypeScript é”™è¯¯
- ç¡®è®¤æ‰€æœ‰å¯¼å…¥çš„æ¨¡å—å­˜åœ¨

---

## âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] Vercel éƒ¨ç½²çŠ¶æ€æ˜¯æˆåŠŸçš„ï¼ˆç»¿è‰² âœ…ï¼‰
- [ ] æœ€æ–°éƒ¨ç½²åŒ…å«æœ€æ–°çš„ä»£ç 
- [ ] æ„å»ºæ—¥å¿—æ²¡æœ‰é”™è¯¯
- [ ] `src/app/api/test/route.ts` æ–‡ä»¶å­˜åœ¨
- [ ] æœ¬åœ°æµ‹è¯• `/api/test` å¯ä»¥å·¥ä½œ
- [ ] Vercel é¡¹ç›®è®¾ç½®ä¸­ Framework æ˜¯ Next.js
- [ ] ç¯å¢ƒå˜é‡å·²æ­£ç¡®é…ç½®

---

## ğŸš¨ å¦‚æœä»¥ä¸Šéƒ½ä¸å·¥ä½œ

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **Vercel éƒ¨ç½²æ—¥å¿—**ï¼ˆBuild Logsï¼‰
2. **æµ‹è¯•ç»“æœ**ï¼š
   - `/api/test` è¿”å›ä»€ä¹ˆï¼Ÿ
   - `/api/data` è¿”å›ä»€ä¹ˆï¼Ÿ
   - æ˜¯å¦æ‰€æœ‰ API éƒ½ 404ï¼Ÿ
3. **æœ¬åœ°æµ‹è¯•ç»“æœ**ï¼š
   - `npm run dev` åï¼Œ`/api/test` æ˜¯å¦å·¥ä½œï¼Ÿ
4. **Function Logs**ï¼š
   - è®¿é—® API æ—¶æ˜¯å¦æœ‰ä»»ä½•æ—¥å¿—ï¼Ÿ

æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥è¯Šæ–­é—®é¢˜ï¼

