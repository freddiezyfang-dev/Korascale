# ğŸ¯ Journey åˆ†ç±»è°ƒæ•´æ‰§è¡Œé¡ºåºæŒ‡å—

## ğŸ“‹ ç›®æ ‡
å°† Journey ç‰ˆé¢è°ƒæ•´ä¸ºä¸‰ä¸ªæ–°åˆ†ç±»ï¼š
- **Day Tour**ï¼ˆä¸€æ—¥æ¸¸ï¼‰
- **Short Trips**ï¼ˆçŸ­é€”æ—…è¡Œï¼‰
- **Premium**ï¼ˆé«˜ç«¯å®šåˆ¶ï¼‰

å¹¶å°†å†…å®¹ä¸Šä¼ åˆ°äº‘æ•°æ®åº“å’Œäº‘å­˜å‚¨ã€‚

---

## âœ… æ¨èæ‰§è¡Œé¡ºåº

### **é˜¶æ®µä¸€ï¼šæ•°æ®ç»“æ„å‡†å¤‡** âš™ï¸

#### 1. æ›´æ–°ç±»å‹å®šä¹‰
**æ–‡ä»¶**: `src/types/index.ts`
- ä¿®æ”¹ `Journey` æ¥å£ä¸­çš„ `category` å­—æ®µç±»å‹
- ä»ç°æœ‰çš„ `'Food' | 'Culture & History' | 'Adventure' | 'City' | 'Nature' | 'Spiritual'`
- æ”¹ä¸ºï¼š`'Day Tour' | 'Short Trips' | 'Premium'` æˆ–æ·»åŠ æ–°å­—æ®µ `journeyType`

**å»ºè®®æ–¹æ¡ˆ**ï¼š
- ä¿ç•™ `category` ç”¨äºå†…å®¹åˆ†ç±»ï¼ˆFood, Adventureç­‰ï¼‰
- æ·»åŠ æ–°å­—æ®µ `journeyType: 'Day Tour' | 'Short Trips' | 'Premium'` ç”¨äºç‰ˆé¢åˆ†ç±»

#### 2. æ›´æ–°æ•°æ®åº“ç»“æ„
**æ–‡ä»¶**: `database/migrations/001_create_tables.sql`
- å¦‚æœä½¿ç”¨æ–°å­—æ®µæ–¹æ¡ˆï¼Œéœ€è¦æ·»åŠ  `journey_type VARCHAR(50)` å­—æ®µ
- æˆ–è€…ä¿®æ”¹ç°æœ‰ `category` å­—æ®µæ”¯æŒæ–°å€¼
- åˆ›å»ºæ•°æ®åº“è¿ç§»è„šæœ¬

**æ‰§è¡Œå‘½ä»¤**ï¼š
```sql
-- æ–¹æ¡ˆ1ï¼šæ·»åŠ æ–°å­—æ®µï¼ˆæ¨èï¼‰
ALTER TABLE journeys ADD COLUMN IF NOT EXISTS journey_type VARCHAR(50);
CREATE INDEX IF NOT EXISTS idx_journeys_journey_type ON journeys(journey_type);

-- æ–¹æ¡ˆ2ï¼šç›´æ¥ä¿®æ”¹categoryï¼ˆå¦‚æœç¡®å®šè¦æ›¿æ¢ï¼‰
-- éœ€è¦å…ˆè¿ç§»ç°æœ‰æ•°æ®
```

---

### **é˜¶æ®µäºŒï¼šåç«¯APIæ›´æ–°** ğŸ”§

#### 3. æ›´æ–°APIè·¯ç”±
**æ–‡ä»¶**: 
- `src/app/api/journeys/route.ts`
- `src/app/api/journeys/[id]/route.ts`
- `src/app/api/journeys/slug/[slug]/route.ts`

**éœ€è¦ä¿®æ”¹**ï¼š
- GET è¯·æ±‚ï¼šè¿”å›æ–°å­—æ®µ
- POST/PUT è¯·æ±‚ï¼šæ¥æ”¶å’Œä¿å­˜æ–°å­—æ®µ
- ç¡®ä¿æ•°æ®è½¬æ¢æ­£ç¡®

#### 4. æ›´æ–°æ•°æ®åº“å®¢æˆ·ç«¯
**æ–‡ä»¶**: `src/lib/databaseClient.ts`
- æ›´æ–° `journeyAPI.create()` å’Œ `journeyAPI.update()` æ–¹æ³•
- ç¡®ä¿æ–°å­—æ®µæ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“

---

### **é˜¶æ®µä¸‰ï¼šå‰ç«¯æ˜¾ç¤ºé¡µé¢æ›´æ–°** ğŸ¨

#### 5. æ›´æ–° Journeys åˆ—è¡¨é¡µé¢
**æ–‡ä»¶**: `src/app/journeys/page.tsx`

**éœ€è¦ä¿®æ”¹**ï¼š
- æ·»åŠ æŒ‰ `journeyType` ç­›é€‰çš„åŠŸèƒ½
- æ›´æ–°ç­›é€‰å™¨UIï¼Œæ˜¾ç¤ºä¸‰ä¸ªæ–°åˆ†ç±»
- å¯ä»¥æ·»åŠ æ ‡ç­¾é¡µï¼ˆTabsï¼‰æˆ–ç­›é€‰æŒ‰é’®

**å»ºè®®UI**ï¼š
```tsx
// æ·»åŠ åˆ†ç±»æ ‡ç­¾é¡µ
<Tabs>
  <Tab label="Day Tour" />
  <Tab label="Short Trips" />
  <Tab label="Premium" />
</Tabs>
```

#### 6. æ›´æ–° Journey è¯¦æƒ…é¡µé¢
**æ–‡ä»¶**: `src/app/journeys/[...slug]/page.tsx`

**éœ€è¦ä¿®æ”¹**ï¼š
- æ˜¾ç¤º `journeyType` æ ‡ç­¾
- æ ¹æ®ç±»å‹è°ƒæ•´é¡µé¢æ ·å¼ï¼ˆå¯é€‰ï¼‰

---

### **é˜¶æ®µå››ï¼šç®¡ç†åå°æ›´æ–°** ğŸ‘¨â€ğŸ’¼

#### 7. æ›´æ–° Journey ç®¡ç†é¡µé¢
**æ–‡ä»¶**: `src/app/admin/journeys/page.tsx`

**éœ€è¦ä¿®æ”¹**ï¼š
- æ·»åŠ  `journeyType` ç­›é€‰å™¨
- æ›´æ–°ç»Ÿè®¡å¡ç‰‡ï¼Œæ˜¾ç¤ºå„ç±»å‹æ•°é‡
- æ›´æ–° `categoryConfig` æˆ–æ·»åŠ  `journeyTypeConfig`

#### 8. æ›´æ–° Journey æ·»åŠ /ç¼–è¾‘é¡µé¢
**æ–‡ä»¶**: 
- `src/app/admin/journeys/add/page.tsx`
- `src/app/admin/journeys/edit/[id]/page.tsx`

**éœ€è¦ä¿®æ”¹**ï¼š
- æ·»åŠ  `journeyType` é€‰æ‹©å™¨ï¼ˆä¸‹æ‹‰æ¡†æˆ–å•é€‰æŒ‰é’®ï¼‰
- æ›´æ–°è¡¨å•éªŒè¯
- ç¡®ä¿ä¿å­˜æ—¶åŒ…å«æ–°å­—æ®µ

**å»ºè®®UI**ï¼š
```tsx
<label>Journey Type</label>
<select value={formData.journeyType} onChange={...}>
  <option value="Day Tour">Day Tour</option>
  <option value="Short Trips">Short Trips</option>
  <option value="Premium">Premium</option>
</select>
```

#### 9. æ›´æ–° Context
**æ–‡ä»¶**: `src/context/JourneyManagementContext.tsx`

**éœ€è¦ä¿®æ”¹**ï¼š
- æ·»åŠ  `getJourneysByType()` æ–¹æ³•
- æ›´æ–°é»˜è®¤æ•°æ®ï¼ŒåŒ…å« `journeyType` å­—æ®µ

---

### **é˜¶æ®µäº”ï¼šå†…å®¹æ·»åŠ å’Œä¸Šä¼ ** ğŸ“¸

#### 10. å‡†å¤‡å†…å®¹æ•°æ®
**æ­¥éª¤**ï¼š
1. æ•´ç†æ‰€æœ‰ Journey å†…å®¹ï¼ˆæ ‡é¢˜ã€æè¿°ã€è¡Œç¨‹ç­‰ï¼‰
2. ç¡®å®šæ¯ä¸ª Journey çš„ `journeyType` åˆ†ç±»
3. å‡†å¤‡å›¾ç‰‡æ–‡ä»¶ï¼ˆä¸»å›¾ã€è¯¦æƒ…å›¾ç­‰ï¼‰

#### 11. ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨
**æ–¹å¼**ï¼šé€šè¿‡ç®¡ç†åå°ä¸Šä¼ 

**æ­¥éª¤**ï¼š
1. è®¿é—® `/admin/journeys/add` æˆ– `/admin/journeys/edit/[id]`
2. åœ¨å›¾ç‰‡ä¸Šä¼ åŒºåŸŸç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®
3. é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
4. ç­‰å¾…ä¸Šä¼ å®Œæˆï¼ˆè‡ªåŠ¨ä¸Šä¼ åˆ° Vercel Blobï¼‰
5. å›¾ç‰‡URLä¼šè‡ªåŠ¨å¡«å……åˆ°è¡¨å•

**æ³¨æ„**ï¼š
- å›¾ç‰‡ä¼šè‡ªåŠ¨ä¿å­˜åˆ°äº‘å­˜å‚¨ï¼ˆVercel Blobï¼‰
- URLæ ¼å¼ï¼š`https://xxx.public.blob.vercel-storage.com/journeys/xxx.jpg`
- æ”¯æŒæ‰¹é‡ä¸Šä¼ å¤šå¼ å›¾ç‰‡

#### 12. æ·»åŠ  Journey å†…å®¹
**æ­¥éª¤**ï¼š
1. è®¿é—® `/admin/journeys/add`
2. å¡«å†™æ‰€æœ‰å­—æ®µï¼š
   - åŸºæœ¬ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€æè¿°ã€ä»·æ ¼ç­‰ï¼‰
   - **é€‰æ‹© `journeyType`**ï¼ˆDay Tour / Short Trips / Premiumï¼‰
   - é€‰æ‹© `category`ï¼ˆFood / Adventureç­‰ï¼Œç”¨äºå†…å®¹åˆ†ç±»ï¼‰
   - ä¸Šä¼ å›¾ç‰‡ï¼ˆè‡ªåŠ¨ä¿å­˜åˆ°äº‘å­˜å‚¨ï¼‰
   - å¡«å†™è¡Œç¨‹è¯¦æƒ…
   - è®¾ç½®çŠ¶æ€ï¼ˆdraft â†’ activeï¼‰
3. ç‚¹å‡»"Save"ä¿å­˜
4. **æ•°æ®ä¼šè‡ªåŠ¨ä¿å­˜åˆ° PostgreSQL æ•°æ®åº“**

**æ•°æ®ä¿å­˜æµç¨‹**ï¼š
```
å¡«å†™è¡¨å• â†’ ç‚¹å‡»ä¿å­˜ â†’ è°ƒç”¨ addJourney() 
â†’ journeyAPI.create() â†’ ä¿å­˜åˆ° PostgreSQL 
â†’ åŒæ—¶å¤‡ä»½åˆ° localStorage
```

---

### **é˜¶æ®µå…­ï¼šæ•°æ®è¿ç§»ï¼ˆå¦‚æœ‰ç°æœ‰æ•°æ®ï¼‰** ğŸ”„

#### 13. è¿ç§»ç°æœ‰ Journey æ•°æ®
**å¦‚æœå·²æœ‰ Journey æ•°æ®éœ€è¦åˆ†ç±»**ï¼š

**æ­¥éª¤**ï¼š
1. è®¿é—® `/admin/journeys`
2. å¯¹æ¯ä¸ªç°æœ‰ Journeyï¼š
   - ç‚¹å‡»"Edit"
   - é€‰æ‹©å¯¹åº”çš„ `journeyType`
   - ä¿å­˜æ›´æ–°

**æˆ–è€…åˆ›å»ºè¿ç§»è„šæœ¬**ï¼š
```typescript
// æ‰¹é‡æ›´æ–°è„šæœ¬ï¼ˆåœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼‰
const journeys = await fetch('/api/journeys').then(r => r.json());
journeys.forEach(journey => {
  // æ ¹æ® duration æˆ–å…¶ä»–æ¡ä»¶è‡ªåŠ¨åˆ†ç±»
  let journeyType = 'Day Tour';
  if (journey.duration.includes('2') || journey.duration.includes('3')) {
    journeyType = 'Short Trips';
  }
  // æ›´æ–°
  fetch(`/api/journeys/${journey.id}`, {
    method: 'PUT',
    body: JSON.stringify({ journeyType })
  });
});
```

---

## ğŸ¯ å¿«é€Ÿæ‰§è¡Œæ¸…å•

### âœ… å¿…é¡»å®Œæˆçš„æ­¥éª¤ï¼ˆæŒ‰é¡ºåºï¼‰

- [ ] **æ­¥éª¤1**: æ›´æ–°ç±»å‹å®šä¹‰ (`src/types/index.ts`)
- [ ] **æ­¥éª¤2**: æ›´æ–°æ•°æ®åº“ç»“æ„ï¼ˆæ·»åŠ  `journey_type` å­—æ®µï¼‰
- [ ] **æ­¥éª¤3**: æ›´æ–°APIè·¯ç”±ï¼ˆæ”¯æŒæ–°å­—æ®µï¼‰
- [ ] **æ­¥éª¤4**: æ›´æ–°æ•°æ®åº“å®¢æˆ·ç«¯
- [ ] **æ­¥éª¤5**: æ›´æ–°å‰ç«¯åˆ—è¡¨é¡µé¢ï¼ˆæ·»åŠ ç­›é€‰ï¼‰
- [ ] **æ­¥éª¤6**: æ›´æ–°ç®¡ç†åå°åˆ—è¡¨é¡µé¢
- [ ] **æ­¥éª¤7**: æ›´æ–°æ·»åŠ /ç¼–è¾‘é¡µé¢ï¼ˆæ·»åŠ é€‰æ‹©å™¨ï¼‰
- [ ] **æ­¥éª¤8**: æ›´æ–° Context
- [ ] **æ­¥éª¤9**: å‡†å¤‡å†…å®¹æ•°æ®
- [ ] **æ­¥éª¤10**: ä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨ï¼ˆé€šè¿‡åå°ï¼‰
- [ ] **æ­¥éª¤11**: æ·»åŠ  Journey å†…å®¹ï¼ˆé€šè¿‡åå°ï¼‰
- [ ] **æ­¥éª¤12**: è¿ç§»ç°æœ‰æ•°æ®ï¼ˆå¦‚æœ‰ï¼‰

---

## ğŸ“ é‡è¦æç¤º

### å…³äºæ•°æ®ä¿å­˜
âœ… **æ‰€æœ‰æ•°æ®éƒ½ä¼šè‡ªåŠ¨ä¿å­˜**ï¼š
- æ–‡æœ¬å†…å®¹ â†’ PostgreSQL æ•°æ®åº“
- å›¾ç‰‡æ–‡ä»¶ â†’ Vercel Blob äº‘å­˜å‚¨
- æ— éœ€æ‰‹åŠ¨æ“ä½œæ•°æ®åº“

### å…³äºå›¾ç‰‡ä¸Šä¼ 
âœ… **å›¾ç‰‡ä¸Šä¼ å·²å®ç°**ï¼š
- åœ¨ç¼–è¾‘é¡µé¢ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®
- è‡ªåŠ¨ä¸Šä¼ åˆ° Vercel Blob
- URL è‡ªåŠ¨å¡«å……åˆ°è¡¨å•
- ä¿å­˜æ—¶ URL ä¿å­˜åˆ°æ•°æ®åº“

### å…³äºåˆ†ç±»è®¾è®¡
ğŸ’¡ **å»ºè®®**ï¼š
- `journeyType`: ç”¨äºç‰ˆé¢åˆ†ç±»ï¼ˆDay Tour / Short Trips / Premiumï¼‰
- `category`: ç”¨äºå†…å®¹åˆ†ç±»ï¼ˆFood / Adventure / Cultureç­‰ï¼‰
- ä¸¤è€…å¯ä»¥å¹¶å­˜ï¼Œæä¾›æ›´çµæ´»çš„ç­›é€‰

---

## ğŸš€ å¼€å§‹æ‰§è¡Œ

å»ºè®®ä»**é˜¶æ®µä¸€**å¼€å§‹ï¼Œé€æ­¥å®Œæˆæ¯ä¸ªæ­¥éª¤ã€‚å¦‚æœéœ€è¦å¸®åŠ©å®ç°æŸä¸ªå…·ä½“æ­¥éª¤ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼


